<div id="calendar-display">
  <%= calendar(:year => Time.now.year, :month => Time.now.month) do |d|
      link_to_remote(d.mday, 
          :before => "Element.show('spinner')",
          :success => "Element.hide('spinner')",
          :url => { :controller => '/appointments', :action => 'index'}, 
          :method => :get,
          :with => "'date=' + #{d.to_s.gsub('-', '')}")   end %> 
</div>

<div id="new-department">
  <table cellpadding="5px">           
     <tr> <td><%= f.label :department %></td> <td><%= select :departament, :id, [['Select department' , '']] + Department.departments_for_select_list %></td> </tr>
     <tr> <td><label>Doctor</label></td><td><div id="doctors"><%=render :partial => 'doctors_list', :locals => {:f => f, :doctors => doctors_list} %></div></td> </tr>
     <tr> <td> <%= f.label :appointment_time %>:</td>
          <td><%= f.select :hour, hours, :selected => (@hour || 9) %> <%= f.select :minute, minutes, :selected => (@minute || 30) %></td> 
     </tr>  
     <tr> <td><label>New patient?</label></td>
          <td><%= radio_button_tag ('new_patient_check', 'yes', checked = true, 
                                                    options = {:onclick => "Element.show('new_patient'); Element.hide('patient_search');"}) %> Yes &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;              <%= radio_button_tag ('new_patient_check', 'no', checked = false, 
                                                   options = {:onclick => "Element.show('patient_search'); Element.hide('new_patient');"}) %> No        </td> 
     </tr>
  </table>

   <%=image_submit_tag('button.png')%> 

  <%= observe_field(:appointment_doctor_id, :frequency => 0.5, 
                    :before => "Element.show('spinner')",
                    :success => "Element.hide('spinner')",
                    :url => appointments_url, 
                    :method => :get,
                    :with => "'doctor=' + value"
                   ) %>	 </div>
	    		  
<div id='new_patient'>
   <% fields_for :patient do |patient| %>		   
      <%=render :partial => 'new_patient', :locals => {:patient => patient} %>
   <% end %>	   
</div>

<input type="hidden" name="patient_id" value="">
 
